<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chargement du serveur...</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">
<link rel="preload" as="audio" href="./music.mp3">
<style>
:root{
--glow: 0.7; /* intensité de lueur (pilotée par la musique) */
--barSpeed: 6s; /* vitesse de l'onde sur la barre (pilotée par la musique) */
--accent1: #2e1f47;
--accent2: #5c3b91;
--accent3: #9d7bc0;
}
html, body { margin:0; padding:0; height:100%; overflow:hidden; font-family:'Cinzel Decorative',serif; }
body {
position:relative;
background:url('./background.jpg') center/cover no-repeat fixed;
display:flex; flex-direction:column; justify-content:center; align-items:center;
}
/* Vignette douce pour renforcer l'ambiance et la lisibilité du titre */
.vignette{ position:fixed; inset:0; pointer-events:none; background:radial-gradient(transparent 50%, rgba(0,0,0,.45) 85%); }


/* Particules légères animées (poussière) */
#fx{ position:fixed; inset:0; pointer-events:none; mix-blend-mode:screen; opacity:.25; }


h1 { color:#f5f1e8; font-size:60px; text-align:center;
text-shadow: 0 0 calc(10px * var(--glow)) rgba(255,255,255,.8), 0 0 calc(30px * var(--glow)) rgba(157,123,192,.6), 0 6px 18px rgba(0,0,0,.8);
z-index:2; margin:0; padding:0 16px;
transition: text-shadow .15s linear, transform .15s linear;
}


.progress-container { position:fixed; left:0; bottom:0; width:100%; height:56px; background:rgba(0,0,0,.68); box-shadow:inset 0 0 12px rgba(255,255,255,.18); overflow:hidden }


.progress-bar { position:relative; height:100%; width:0%; background:linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3)); box-shadow: 0 0 calc(25px * var(--glow)) rgba(156,120,192,.75); transition: width .45s ease; }


/* Onde lumineuse qui parcourt la barre en boucle */
.progress-bar::before{
content:""; position:absolute; inset:0; background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
background-size: 220% 100%; filter: blur(6px);
animation: shimmer var(--barSpeed) linear infinite;
mix-blend-mode: screen;
}
@keyframes shimmer{ from{ background-position: -120% 0; } to{ background-position: 120% 0; } }
#viz-wrap{ display:flex; justify-content:center; align-items:flex-end; width:100%; pointer-events:none; position:relative; z-index:2; margin-bottom:8px; }
#viz{ width:min(1100px, 90vw); height:78px; }
/* Ligne de base (dessinée dans le canvas) */
</style>
</head>
<body>
<!-- Visualiseur audio: ligne + barres synchronisées avec la musique -->
<div id="viz-wrap" aria-hidden="true">
<canvas id="viz"></canvas>
</div>
<h1>Clair Obscur : Pentacle</h1>


<div class="progress-container" aria-label="Chargement">
<div class="progress-bar" id="bar"></div>
</div>


<audio id="music" autoplay loop preload="auto" playsinline>
<source src="./music.mp3" type="audio/mpeg" />
</audio>


<script>
// Progression visuelle (peut être ajustée)
const bar = document.getElementById('bar');
let pct = 0; function tick(){ pct += Math.random()*2 + 0.5; if(pct>100) pct=100; bar.style.width = pct+'%'; if(pct<100){ setTimeout(tick, 700 + Math.random()*600); } } tick();


// Web Audio API: fait réagir le titre et la barre à la musique
const music = document.getElementById('music');
const root = document.documentElement; const title = document.querySelector('h1');
let audioCtx, analyser, data, raf;


function setupAudio(){
